<div class="container">
  <h2 class="title">User editing<h2>

  <% if @user.errors.any? %>
   <div class="mt">
      <% @user.errors.full_messages.each do |message| %>
        <p class="mb__sm text__red"><%= message %></p>
      <% end %>
    </div>
  <% end %>

  <div class="mt">
    <p><%= image_tag @user.gravatar_url, title: "@#{@user.nickname}", class: 'rounded' %></p>
    <p class="text__sm">To add or change an avatar - register on
      <%= link_to "Gravatar", 'https://gravatar.com' %> and upload a photo</p>
  </div>

  <div class="mt">
    <%= form_with model: @user, data: { turbo: false } do |form| %>
      <p><%= form.label :name, "Name" %></p>
      <p><%= form.text_field :name, class: "form__text__field" %></p>

      <p class="mt"><%= form.label :nickname, "Nickname on the site" %></p>
      <p><%= form.text_field :nickname, class: "form__text__field" %></p>

      <p class="mt__lg text__sm">If you don't want to change your password, leave the field blank.</p>

      <p class="mt"><%= form.label :email %></p>
      <p><%= form.text_field :email, class: "form__text__field" %></p>

      <p class="mt"><%= form.label :password, 'Password' %></p>
      <p><%= form.password_field :password, class: "form__text__field" %></p>

      <p class="mt"><%= form.label :password_confirmation, 'Password confirmation' %></p>
      <p><%= form.password_field :password_confirmation, class: "form__text__field" %></p>
      
      <p class="mt"><%= form.color_field :color %>
      <%= form.label :color, 'Choose color header', class: "title__sm text__grey" %></p>
  
      <p class="mt__lg">
        <%= form.submit "Save", class: "button button__main" %>
        <span class="text__sm">or <%= link_to "Back", :back %></span>
      </p>

    <% end %>
  </div>
  <div class="mt__lg">
    <%= button_to "Delete profile", user_path(@user),
    method: :delete,
    form: {data: {turbo_confirm: "Are you sure?"}},
    class: 'text__red text__sm' %>
  </div>
</div>
